# LINEリッチメニュー実装ガイド

## リッチメニューとは

LINE Botの画面下部に表示されるメニュー。タップでアクションを実行できます。

## 実装するメニュー項目

### メニュー構成（推奨）

#### パターン1: 3項目メニュー（推奨）
```
┌─────────────┬─────────────┬─────────────┐
│  会員情報   │  イベント    │  登録変更   │
│   確認      │   一覧       │             │
└─────────────┴─────────────┴─────────────┘
```

#### パターン2: 2行×2列（4項目）
```
┌─────────────┬─────────────┐
│  会員情報   │  イベント    │
│   確認      │   一覧       │
├─────────────┼─────────────┤
│  登録変更   │  お問い合わせ│
└─────────────┴─────────────┘
```

## 実装する機能

### 1. 会員情報確認ページ

**URL**: `/profile?user_id={user_id}`

**機能**:
- 現在の登録情報を表示
- 氏名、支部、会員情報、配信希望情報など
- 「登録情報を変更する」ボタン

### 2. イベント・研修会一覧ページ

**URL**: `/events?user_id={user_id}`

**機能**:
- 申し込み中のイベント・研修会を一覧表示
- イベント名、日時、場所
- 詳細リンク

### 3. 会員登録情報変更ページ

**URL**: `/register?user_id={user_id}`

**機能**:
- 既存の会員登録フォームを使用
- 現在の情報を事前入力

## リッチメニューの設定手順

### ステップ1: メニュー画像の作成

1. **画像サイズ**
   - 3項目: 2500×843px または 2500×1686px
   - 4項目: 2500×1686px

2. **画像形式**
   - PNG、JPEG
   - ファイルサイズ: 1MB以下

3. **デザイン**
   - 各メニュー項目を明確に区別
   - テキストで機能を説明

### ステップ2: LINE Developersで設定

1. **LINE Developersコンソールにログイン**
   - https://developers.line.biz/console/

2. **チャネルを選択**

3. **「Messaging API」タブを開く**

4. **「リッチメニュー」セクションを開く**

5. **「新規作成」をクリック**

6. **メニュー情報を入力**
   - メニュー名: 「会員管理メニュー」
   - サイズ: 選択（3項目または4項目）

7. **メニュー項目を設定**
   - 各項目にアクションを設定
   - アクションタイプ: 「URIアクション」
   - URI: `https://line-tool.onrender.com/profile?user_id={user_id}`など

8. **画像をアップロード**

9. **「公開」をクリック**

## 注意事項

⚠️ **user_idの取得**
- リッチメニューからアクセスする場合、user_idをURLパラメータで渡す必要があります
- LINE Messaging APIのPostbackEventを使用する方法もあります

⚠️ **アクションタイプ**
- URIアクション: 外部URLに遷移
- Postbackアクション: Botにデータを送信（サーバー側で処理）

## 実装の優先順位

1. **会員情報確認ページ**（最優先）
2. **イベント一覧ページ**（次）
3. **リッチメニューの設定**（最後）

