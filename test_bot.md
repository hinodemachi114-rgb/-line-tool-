# LINE Bot動作テスト手順

## テスト手順

### ステップ1: メッセージ送信テスト

1. LINEアプリでBotを開く
2. 以下のメッセージを送信：
   - 「こんにちは」
   - 「会員登録お願いします」
   - 「登録」

### ステップ2: Botからの返信確認

Botから以下のようなメッセージが返信されることを確認：

```
こんにちは！

薬剤師会の会員登録をお願いします！

以下のリンクから会員情報を入力してください。

🔻 会員登録フォーム
https://superprecise-devouringly-jairo.ngrok-free.dev/register?user_id=...
```

### ステップ3: フォームアクセステスト

1. Botから送られてきたリンクをクリック
2. フォームが正常に表示されることを確認
3. すべての項目が表示されていることを確認

### ステップ4: フォーム送信テスト

1. テストデータを入力：
   - 氏名（漢字）: テスト 太郎
   - 氏名（ふりがな）: てすと たろう
   - メールアドレス: test@example.com
   - 電話番号: 09012345678
   - 所属支部: 博多支部
   - 会員情報: A会員
   - 配信希望情報: すべての情報
   - 勤務先・大学名: テスト薬局

2. 「登録する」ボタンをクリック

3. 登録完了ページが表示されることを確認

### ステップ5: データ保存確認

1. `members.csv` ファイルを開く
2. 入力したデータが正しく保存されているか確認
3. user_idが正しく記録されているか確認

### ステップ6: LINE通知確認

1. LINE Botから登録完了メッセージが送信されることを確認
2. メッセージ内容が正しいか確認

### ステップ7: 情報変更テスト

1. 同じuser_idで再度フォームにアクセス
2. 情報を変更して送信
3. 既存データが上書きされることを確認

## エラーが発生した場合

### サーバーのログを確認

サーバーのターミナルで以下のようなログを確認：

```
★Webhook受信
★メッセージ受信: こんにちは
★user_id取得成功: U...
★返信成功！
```

### よくある問題

1. **Botから返信がない**
   - Webhook URLが正しく設定されているか確認
   - サーバーが起動しているか確認
   - サーバーのログでエラーがないか確認

2. **フォームが表示されない**
   - ngrokが起動しているか確認
   - BASE_URLが正しく設定されているか確認

3. **フォーム送信が失敗する**
   - 必須項目がすべて入力されているか確認
   - サーバーのログでエラー内容を確認

## 成功の確認

すべてのステップが成功すれば、LINE Botは正常に動作しています！


